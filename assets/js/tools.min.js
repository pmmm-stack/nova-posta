(()=>{"use strict";class e{constructor(e){this.message=e}}async function o(o,s,c){return s.action=o,s._token=wc_ukr_shipping_globals.nonce,await async function(o,s,c){!function(){if(!window.jQuery)throw new e("jQuery not found.")}();const t=window.jQuery;return new Promise((function(e,r){const a=t.ajax({method:"POST",url:o,data:s,dataType:"json",success:function(o){e(o)},error:function(e,o,s){r({jqXHR:e,textStatus:o,errorThrown:s})}});c&&c.cancelSource&&c.cancelSource.setXHR(a)}))}(wc_ukr_shipping_globals.ajaxUrl,s,c||{})}async function s(e,c,t){c=c||0,t=t||0;try{const r=await o("wcus_tools_sync_legacy_ttn",{cursor:c});r.success?(t+=r.data.synced,r.data.operation_success?e("success",`Operation completed. Synced: ${t} / ${r.data.total}`):(e("info",`Synced: ${t} / ${r.data.total}`),await s(e,r.data.cursor,t))):e("error",`Sync error: ${r.error.message}`)}catch(o){e("error",`Sync error: ${o.message}`)}}!function(e){function o(o,s){let c="";switch(o){case"info":c="wcus-warehouse-loader__log--info";break;case"error":c="wcus-warehouse-loader__log--error";break;case"success":c="wcus-warehouse-loader__log--success"}e("#wcus-tools-migrate-logs").html(`<div class="wcus-warehouse-loader__log ${c}">${s}</div>`)}e("#wcus-tools-migrate-ttn").on("click",(async function(c){c.preventDefault(),c.stopImmediatePropagation(),e(this).hide(),await s(o),e(this).show()}))}(jQuery)})();